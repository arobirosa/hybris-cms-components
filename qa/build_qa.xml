<?xml version="1.0"?>
<project name="ant_qa" default="qa" basedir=".">
	
	<property name="dir_qa" value="${basedir}/qa"/>
	<property name="dir_qa_reports" value="${basedir}/qa_reports"/>
	
	<import file="${dir_qa}/build_qa_findbugs.xml"/>
	<import file="${dir_qa}/build_qa_pmd.xml"/>
	<import file="${dir_qa}/build_qa_checkstyle.xml"/>
	<import file="${dir_qa}/build_qa_cobertura.xml"/>
	
	<fileset dir="${dir_hybris_bin}" id="fileset_src">
		<include name="custom/*/src/**/*.java"/>
		<include name="custom/*/web/src/**/*.java"/>
		<include name="custom/*/backoffice/src/**/*.java"/>
		<include name="custom/*/hmc/src/**/*.java"/>
		<include name="custom/*/testsrc/**/*.java"/>
		<include name="custom/*/web/testsrc/**/*.java"/>
		<include name="custom/*/backoffice/testsrc/**/*.java"/>
		<include name="custom/*/hmc/testsrc/**/*.java"/>
	</fileset>
	
	<fileset dir="${dir_hybris_bin}" id="fileset_bin">
		<include name="custom/*/classes/**/*.class"/>
		<include name="custom/*/web/webroot/WEB-INF/classes/"/>
		<include name="custom/*/backoffice/classes/**/*.class"/>
		<include name="custom/*/hmc/classes/**/*.class"/>
	</fileset>
	
	<fileset dir="${dir_hybris_bin}" id="fileset_hybris_bin">
		<include name="custom/**/lib/*.jar"/>		
		<include name="platform/ext/*/bin/*.jar"/>
		<include name="platform/ext/*/lib/*.jar"/>
		<include name="platform/ext/*/classes/**/*.class"/>
		<include name="platform/ext/*/web/webroot/WEB-INF/classes/**/*.class"/>
		<include name="platform/ext/*/web/webroot/WEB-INF/bin/*.jar"/>
		<include name="platform/ext/*/hmc/classes/**/*.class"/>
		<include name="platform/ext/*/hmc/bin/*.jar"/>
		<include name="platform/bootstrap/bin/*.jar"/>
		<include name="platform/tomcat/lib/*.jar"/>
		<include name="ext-platform-optional/hmc/web/webroot/WEB-INF/classes/**/*.class"/>
		<include name="ext-backoffice/backoffice/web/webroot/WEB-INF/lib/*.jar"/>
		<include name="ext-cockpit/cockpit/bin/*.jar"/>
	</fileset>
	
	<target name="qa" depends="qa_clean, findbugs, pmd, checkstyle, cobertura" description="Runs Findbugs, PMD, Checkstyle and Cobertura" />
	
	<target name="qa_clean" description="Cleans the directory with the QA reports">
		<delete dir="${dir_qa_reports}"/>
		<mkdir dir="${dir_qa_reports}"/> <!-- PMD requires an existent directory -->
	</target>
 </project>
